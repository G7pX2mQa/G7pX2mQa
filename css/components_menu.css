/* ---- Boot loading screen ---- */
.loading-screen {
  position: fixed;
  inset: 0;
  background: #000;
  color: #fff;
  display: grid;
  place-items: center;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
  z-index: 2147483647; /* above everything */
  opacity: 1;
  transition: opacity .25s ease;
}

.loading-screen.hidden {
  opacity: 0;
  pointer-events: none;
}

.loading-screen__text {
  font-size: clamp(16px, 2.4vw, 22px);
  letter-spacing: .04em;
  opacity: .92;
}

/* ===== Title & Basic ===== */
.game-title {
  font-size: var(--h1);
  letter-spacing: 0.5px;
  color: #ffeb3b; /* your bright yellow */
  -webkit-text-stroke: 2px black; /* crisp desktop outline */
  text-stroke: 2px black;
  user-select: none;
}

/* Touch / coarse pointer devices (mobile + tablets like iPads) */
@media (pointer: coarse) {
  .game-title {
    -webkit-text-stroke: 0; /* remove harsh stroke */
    text-stroke: 0;
    text-shadow:
      1px 1px 0 black,
      -1px 1px 0 black,
      1px -1px 0 black,
      -1px -1px 0 black; /* clean simulated outline */
  }
}

/* Desktop: 3 across */
.slots-grid {
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: var(--space-4);
}

/* Phones (narrow): stack by default */
@media (max-width: 1024px) {
  .slots-grid { grid-template-columns: 1fr; }
}

/* Short viewports: 2 columns to reduce height */
@media (max-height: 640px) and (min-width: 380px) {
  .slots-grid { grid-template-columns: repeat(2, 1fr); }
}

/* Card */
.slot-card {
  text-align: left;
  background: linear-gradient(180deg, rgba(15, 22, 38, 0.75), rgba(14, 20, 32, 0.75));
  border: 1px solid rgba(34, 43, 61, 0.6);
  border-radius: 16px;
  padding: clamp(var(--space-5), 2vw, var(--space-6));
  box-shadow: var(--shadow-2);
  transition: transform .15s ease, background .15s ease, border-color .15s ease;
  outline-offset: 2px;
  min-height: clamp(96px, 16vh, 140px);
}

/* Remove aspect ratio on narrow/short screens */
@media (max-width: 900px), (max-height: 700px) {
  .slot-card { aspect-ratio: auto; }
}

/* Extra compact for very short screens */
@media (max-height: 560px) {
  .slot-card {
    min-height: clamp(84px, 14vh, 120px);
    padding: var(--space-4);
  }
}

.slot-card:hover {
  background: var(--card-hover);
  transform: translateY(-2px);
  border-color: #2a3852;
}
.slot-card:active { transform: translateY(0); }

.slot-badge {
  display: inline-flex;
  align-items: center;
  gap: .5ch;
  padding: .25rem .55rem;
  border-radius: 999px;
  background: #0d1522;
  border: 1px solid #22314a;
  color: var(--text-2);
  font-size: var(--tiny);
  margin-bottom: var(--space-3);
}

.slot-title { font-weight: 600; margin-bottom: var(--space-1); }
.slot-meta  { color: var(--text-2); font-size: .9rem; }

/* ===== Title & Coin Styling ===== */
.menu-header h1 {
  font-size: clamp(2rem, 7.5vw, 6.5rem);
  font-weight: 700;
  color: #E5E317;
  letter-spacing: 0.5px;
  line-height: 1.2;
}

/* ===== Coins: desktop-first, tuned for mobile via breakpoints ===== */
.coin-o {
  --coin-size: 0.6em;
  display: inline-block;
  width: var(--coin-size);
  height: var(--coin-size);
  background: url("../img/currencies/coin/coin.png") center/contain no-repeat;
  transform: translateY(0.46em);
  vertical-align: baseline;
  margin-left: 0em;
  margin-right: 0em;
  filter: drop-shadow(0 2px 2px rgba(0,0,0,.35));
}


/* prevent wrapping artifacts near the coin */
.coin-o::before,
.coin-o::after {
  content: "\2060"; /* WORD JOINER prevents awkward breaks */
}

/* ===== Mobile / Short viewports ===== */
@media (max-width: 900px), (max-height: 420px) {
  .menu-header h1 { line-height: 1.08; }

  .coin-o {
    transform: none;
    vertical-align: -0.4em;
    --coin-size: 0.6em;
    margin-left: 0em;
    margin-right: 0em;
  }
}

/* Ultra-narrow portrait */
@media (max-width: 414px) {
  .menu-header h1 {
    white-space: nowrap;
    font-size: clamp(1.55rem, 6.2vw, 2.2rem);
    letter-spacing: 0.25px;
  }

  .coin-o {
    --coin-size: 0.58em;
    vertical-align: -0.35em;
    margin-left: 0em;
    margin-right: 0em;
  }
}

/* Target mobile landscape with coarse pointer and short height (phones) */
@media (orientation: landscape) and (max-height: 480px) and (pointer: coarse) {
  .menu-header .coin-o {
    vertical-align: -0.34em;
    --coin-size: 0.58em;
  }
}

/* ===== Panel header (title + actions) ===== */
.panel-header{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap: var(--space-3);
  margin-bottom: var(--space-2);
}

/* small tweak to nudge the manage button up slightly (balances optical centers) */
.panel-actions{ 
  display:flex; 
  align-items:center; 
  gap: var(--space-3);
  /* move actions up a tiny bit to better align with the title baseline */
  transform: translateY(-0.08rem);
}

/* ===== Buttons ===== */
.btn{
  --btn-bg: #0f1626;
  --btn-border: #22314a;
  --btn-bg-hover: #141d30;
  --btn-border-hover: #2a3b58;

  display:inline-flex;
  align-items:center;
  justify-content:center;
  min-height: 40px;
  padding: 0 .9rem;
  border-radius: 10px;
  border: 1px solid var(--btn-border);
  background: var(--btn-bg);
  color: var(--text-1);
  font-weight: 600;
  letter-spacing: .2px;
  transition: background .15s ease, border-color .15s ease, transform .1s ease;
}
.btn:hover{ background: var(--btn-bg-hover); border-color: var(--btn-border-hover); }
.btn:active{ transform: translateY(1px); }

.btn-ghost{ opacity:.9; }
.btn-ghost:hover{ opacity:1; }

/* Mobile: stack actions under the title, make button full-width */
@media (max-width: 900px){
  .panel-header{ flex-direction: column; align-items: stretch; gap: var(--space-3); }
  .panel-actions .btn{ width: 100%; }
}

/* For iPad */
@media (hover: none) and (pointer: coarse) {
  .menu-header .coin-o {
    transform: translateY(0); /* neutralize the desktop push-down */
  }
}

/* Portrait: lighter nudge */
@media (hover: none) and (pointer: coarse)
  and (min-width: 744px) and (min-height: 744px)
  and (max-width: 1366px) and (max-height: 1366px)
  and (orientation: portrait) {
  .menu-header .coin-o {
    vertical-align: -0.34em;
  }
}

/* Landscape: stronger nudge */
@media (hover: none) and (pointer: coarse)
  and (min-width: 744px) and (min-height: 744px)
  and (max-width: 1366px) and (max-height: 1366px)
  and (orientation: landscape) {
  .menu-header .coin-o {
    vertical-align: -0.40em;
  }
}

.menu-panel {
  /* subtle glass look over moving background */
  background: linear-gradient(
    180deg,
    rgba(14, 22, 34, 0.68),
    rgba(10, 16, 26, 0.62)
  );
  border: 1px solid rgba(34, 43, 61, 0.50);
  backdrop-filter: saturate(1.05) blur(6px);
  -webkit-backdrop-filter: saturate(1.05) blur(6px); /* iOS */
}

/* keep cards solid/opaque in case any earlier rule used alpha */
.menu-panel .slot-card {
  background: linear-gradient(180deg, #0f1626, #0e1420);
  border-color: rgba(34, 43, 61, 0.60);
}

/* iPad/tablet landscape: fixes some issue with some thing */
@media (hover: none) and (pointer: coarse) and (orientation: landscape) and (min-aspect-ratio: 4/3) {
  .menu-header .coin-o { vertical-align: -0.40em; transform: translateY(0); }
}

/* Phone landscape only (exclude iPads & tablets) */
@media (orientation: landscape) and (max-height: 550px) and (pointer: coarse) {
  .menu-header .coin-o {
    vertical-align: -0.33em;
    --coin-size: 0.58em;
    transform: translateY(0);
  }
}

/* Default: hide Manage button until has-opened; hide title visually to prevent flash */
.menu-panel .panel-actions { display: none; }
.panel-title,
#panel-title { opacity: 0; }

/* When the persisted flag is present on <html> or <body> */
:is(html.has-opened, body.has-opened) {
  /* show Manage button */
  .menu-panel .panel-actions { display: block; }

  /* remove title from layout and keep it invisible */
  .panel-title,
  #panel-title { display: none; opacity: 0; }

  /* left-align header and remove upward nudge on actions */
  .panel-header { justify-content: flex-start; gap: var(--space-3); }
  .panel-actions { transform: none; }
}

/* Mobile adjustments: keep header compact and button auto-sized */
@media (max-width: 900px) {
  :is(html.has-opened, body.has-opened) .panel-header { flex-direction: row; align-items: center; }
  :is(html.has-opened, body.has-opened) .panel-actions .btn { width: auto; }
}
