:root{--merchant-bg: hsl(220 32% 7% / 1);--merchant-card: hsl(220 26% 12% / 1);--merchant-border: hsl(215 28% 26% / 1);--merchant-shadow: 0 28px 80px hsl(215 60% 2% / .65);--merchant-radius: 20px;--merchant-anim: .22s cubic-bezier(.2, .8, .2, 1)}.merchant-overlay{position:fixed;inset:0;z-index:4001;pointer-events:none;user-select:none}.merchant-overlay.is-open{pointer-events:auto}.merchant-sheet{position:absolute;inset:0;background:var(--merchant-bg);backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);display:grid;grid-template-rows:auto auto 1fr auto;transform:translateY(100%);transition:transform var(--merchant-anim);box-shadow:var(--merchant-shadow);--merchant-fade-size: clamp(18px, 5vw, 40px)}.merchant-overlay.is-open .merchant-sheet{transform:translateY(0)}.merchant-overlay.firstchat-instant .merchant-sheet{transition:none!important;transform:translateY(0)!important}.shop-grabber,.merchant-grabber{padding-top:calc(8px + var(--safe-top));padding-bottom:12px;display:grid;place-items:center;touch-action:none;-webkit-user-select:none;user-select:none;position:relative;z-index:6}.merchant-grabber{background:var(--merchant-bg)}@media(pointer:fine){.merchant-reset,.merchant-reset__status,.merchant-dialogue-list .dlg-title,.merchant-dialogue-list .dlg-blurb,.merchant-dialogue-list .dlg-reward,.merchant-dialogue-list .dlg-again{-webkit-user-select:text;user-select:text}.merchant-reset img,.merchant-dialogue-list .coin-icon,.merchant-dialogue-list .book-icon,.merchant-reset__action{-webkit-user-select:none;user-select:none}}.shop-grabber .grab-handle,.merchant-grabber .grab-handle{width:56px;height:6px;border-radius:999px;background:#ffffff59;box-shadow:inset 0 1px #ffffff40}.merchant-content{overflow-y:auto;padding:0;scrollbar-gutter:stable both-edges;background:var(--merchant-bg);-webkit-overflow-scrolling:touch;scrollbar-width:none}.merchant-sheet.has-scroll-shadow .merchant-content{-webkit-mask-image:linear-gradient(180deg,transparent 0%,#000 var(--merchant-fade-size),#000 100%);mask-image:linear-gradient(180deg,transparent 0%,#000 var(--merchant-fade-size),#000 100%);-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat}.merchant-sheet.has-scroll-shadow .merchant-header:after{opacity:1}.merchant-content::-webkit-scrollbar{width:0;height:0;display:none}.merchant-content::-webkit-scrollbar{width:12px}.merchant-content::-webkit-scrollbar-track{background:#121721d9;border-left:1px solid var(--merchant-border)}.merchant-content::-webkit-scrollbar-thumb{background:#ffffff38;border-radius:10px}.merchant-content::-webkit-scrollbar-thumb:hover{background:#ffffff52}.merchant-scrollbar{position:absolute;right:6px;width:8px;border-radius:6px;background:transparent;pointer-events:auto;z-index:4}.merchant-scrollbar__thumb{width:100%;min-height:28px;border-radius:6px;background:#ffffff47;box-shadow:inset 0 0 0 1px #ffffff1f;transform:translateY(0);transition:background .15s ease;cursor:grab}.merchant-scrollbar__thumb:hover{background:#ffffff5c}.merchant-scrollbar__thumb.dragging{cursor:grabbing}@media(hover:none)and (pointer:coarse){.merchant-scrollbar{opacity:0;pointer-events:none;transition:opacity .2s ease}.merchant-sheet.is-scrolling .merchant-scrollbar,.merchant-scrollbar__thumb.dragging{opacity:1;pointer-events:auto}}.merchant-header{position:sticky;top:0;z-index:10;padding:10px 12px 8px;background:var(--merchant-bg);backdrop-filter:inherit;-webkit-backdrop-filter:inherit;isolation:isolate}.merchant-title{margin:0 0 8px;font-weight:700;text-align:center;color:#fff;position:relative;z-index:2}.merchant-line{height:2px;width:100%;background:var(--merchant-border);position:relative;z-index:2}.merchant-header:after{content:"";position:absolute;left:0;right:0;top:calc(100% - 1px);height:var(--merchant-fade-size);background:linear-gradient(180deg,var(--merchant-bg),hsl(220 32% 7% / 0));opacity:0;pointer-events:none;transition:opacity .16s ease;z-index:1}.merchant-dialog{padding:12px;display:grid}.merchant-bubble{display:grid;grid-template-columns:auto 1fr;gap:12px;align-items:start;background:var(--merchant-card);border:1px solid var(--merchant-border);border-radius:var(--merchant-radius);padding:14px}.merchant-icon{width:clamp(60px,12vw,96px);height:clamp(60px,12vw,96px);object-fit:contain;display:block}.merchant-text{color:#ffffffe6;font:500 1rem/1.3 system-ui,-apple-system,Segoe UI,Roboto,sans-serif}.merchant-actions{display:flex;justify-content:center;align-items:center;gap:12px;padding:12px 16px calc(12px + var(--safe-bottom));background:var(--merchant-bg)}.merchant-actions .merchant-close{min-width:180px;height:44px;border-radius:0;border:1px solid hsla(0,80%,40%,.45);background:#b8141426;color:#fff;font-weight:600;letter-spacing:.2px;cursor:pointer;transition:transform .12s ease,background .12s ease,border-color .12s ease}.merchant-actions .merchant-close:hover{background:#b8141438}.merchant-actions .merchant-close:active{transform:translateY(1px);background:#b8141447}.merchant-firstchat{position:absolute;inset:0;display:none;place-items:center;z-index:50;pointer-events:none;isolation:isolate}.merchant-firstchat.is-visible{display:grid;pointer-events:auto}.merchant-firstchat:before{content:"";position:absolute;inset:0;backdrop-filter:blur(12px) brightness(.6);-webkit-backdrop-filter:blur(12px) brightness(.6);background:#00000080}.merchant-firstchat--initial:before{background:#000;backdrop-filter:none;-webkit-backdrop-filter:none}.merchant-overlay.firstchat-active .merchant-content,.merchant-overlay.firstchat-active .merchant-actions{visibility:hidden}.merchant-firstchat__card{position:relative;width:min(720px,92vw);background:var(--merchant-card);border:1px solid var(--merchant-border);box-shadow:var(--merchant-shadow);padding:16px;pointer-events:auto}.merchant-firstchat__header .name{font-weight:700;color:#fff;margin-bottom:8px;text-align:left}.merchant-firstchat__header .rule{height:2px;width:100%;background:var(--merchant-border);margin-bottom:12px}.merchant-firstchat__row{display:grid;grid-template-columns:auto 1fr;gap:12px;align-items:start}.merchant-firstchat__icon{width:clamp(60px,12vw,96px);height:clamp(60px,12vw,96px);object-fit:contain}.merchant-firstchat__text{color:#ffffffe6}.merchant-firstchat__actions{display:flex;justify-content:flex-end;margin-top:14px}.merchant-firstchat__continue{min-width:140px;height:38px;border:1px solid hsla(150,60%,35%,.45);background:#248f5926;color:#fff;font-weight:600;letter-spacing:.2px;cursor:pointer}.merchant-firstchat__text.is-typing{cursor:pointer}.merchant-firstchat__choices{display:grid;gap:clamp(6px,1.2vw,10px);margin-top:12px;opacity:0;transform:translateY(6px);transition:opacity .14s ease,transform .14s ease;pointer-events:none}.merchant-firstchat__choices.is-visible{opacity:1;transform:translateY(0);pointer-events:auto}.merchant-firstchat__choices .choice{min-height:38px;padding:8px 12px;text-align:left;border-radius:8px;border:1px solid var(--merchant-border);background:#ffffff0f;color:#fff;font-weight:600;letter-spacing:.2px;cursor:pointer;transition:background .12s ease,transform 90ms ease}.merchant-firstchat__choices .choice:hover{background:#ffffff1a}.merchant-firstchat__choices .choice:active{transform:translateY(1px)}.merchant-lockinfo .merchant-firstchat__card{max-width:clamp(320px,62vw,420px)}.merchant-lockinfo__row{align-items:flex-start;gap:clamp(12px,3vw,18px)}.merchant-lockinfo__message{line-height:1.45}.merchant-lockinfo__actions{margin-top:18px}.merchant-lockinfo__close{min-width:130px;height:44px;border-radius:0;border:1px solid hsla(0,80%,40%,.45);background:#b8141426;color:#fff;font-weight:600;letter-spacing:.2px;cursor:pointer;transition:transform .12s ease,background .12s ease,border-color .12s ease}.merchant-lockinfo__close:hover{background:#b8141438}.merchant-lockinfo__close:active{transform:translateY(1px);background:#b8141447}@media(max-height:500px)and (orientation:landscape){.merchant-firstchat{align-items:flex-start;overflow-y:auto;-webkit-overflow-scrolling:touch;padding:16px 0}.merchant-firstchat__card{margin:auto;max-height:unset}}.merchant-dialogue-list{display:grid;gap:10px;padding-right:2px}.merchant-dialogue-list::-webkit-scrollbar{width:0;height:0}.dlg-card{position:relative;display:grid;grid-template-columns:1fr;grid-auto-rows:min-content;gap:4px;align-items:start;text-align:left;padding:clamp(8px,1.2vw,12px) clamp(10px,2vw,14px);border-radius:12px;border:2px solid var(--merchant-border, rgba(255,255,255,.12));color:#fff;cursor:pointer;transition:background .12s ease,transform 90ms ease,opacity .12s ease}.dlg-card:not(.is-complete):hover{background:#ffffff2e}.dlg-card:active{transform:none}.dlg-card.is-locked,.dlg-card:disabled{opacity:.45;cursor:not-allowed;background:#1f1f1f}.dlg-card.is-locked:hover{background:#272831}.dlg-card.is-mysterious{opacity:.45;background:#1f1f1f;border-style:solid}.dlg-card.is-mysterious:hover{background:#272831}.dlg-card:not(.is-complete):not(.is-mysterious):not(.is-locked){background:#ffffff1f}.dlg-card.is-complete{background:#ffffff08}.dlg-card.is-complete:hover{background:#ffffff0f}.dlg-card:not(.is-locked):not(.is-mysterious):not(.is-complete):hover{background:#ffffff26;transition:background .12s ease}.dlg-card.has-again{padding-right:calc(clamp(10px,2vw,14px) + 110px)}.dlg-title{font-weight:700;letter-spacing:.2px}.dlg-blurb{opacity:.75;font-size:.95em}.dlg-reward{display:inline-flex;align-items:center;gap:3px;font-size:.95em;opacity:.85;justify-self:start;align-self:start;width:max-content;position:relative}.dlg-reward .reward-label{opacity:.85;margin-right:3px}.dlg-reward .coin{display:inline-flex;align-items:center;gap:2px}.dlg-reward .coin-icon{width:.85em;height:.85em;flex:0 0 .85em;background:url(../../../img/currencies/coin/coin.png) center / contain no-repeat;position:relative;top:1px}.dlg-reward .book{display:inline-flex;align-items:center;gap:2px}.dlg-reward .book-icon{width:.85em;height:.85em;flex:0 0 .85em;background:url(../../../img/currencies/book/book.png) center / contain no-repeat;position:relative;top:1px}.dlg-card.is-complete .dlg-title,.dlg-card.is-complete .dlg-blurb,.dlg-card.is-complete .dlg-reward{color:#ffffff8c;opacity:.9}.dlg-card.is-complete .dlg-reward:after{content:"";position:absolute;left:0;top:55%;width:calc(100% + 1px);height:2px;background:#888;transform:translateY(-50%);pointer-events:none;border-radius:1px}.dlg-again{position:absolute;right:clamp(10px,2vw,14px);top:50%;transform:translateY(-50%);color:#ffffff80;font-weight:400;font-size:.95em;white-space:nowrap;pointer-events:none;display:inline-flex;align-items:center;gap:6px;letter-spacing:0}.dlg-again:before{content:"\21bb";opacity:.75;font-weight:400}@media(max-height:500px)and (orientation:landscape){.merchant-dialogue-list{max-height:46vh}}@media(pointer:coarse){.dlg-reward .coin-icon,.dlg-reward .book-icon{top:0}}.merchant-tabs{display:flex;gap:8px;padding:10px 12px 0}.merchant-tab{padding:6px 12px;border-radius:10px;border:1px solid var(--merchant-border);background:#ffffff0a;color:#fff;font-weight:600;letter-spacing:.2px;cursor:pointer;transition:background .12s ease,transform 90ms ease,opacity .12s ease}.merchant-tab:hover{background:#ffffff14}.merchant-tab:active{transform:translateY(1px)}.merchant-tab.is-active{background:#ffffff1f;box-shadow:inset 0 -2px #ffffff2e}.merchant-tab.is-locked{opacity:.45;cursor:not-allowed}.merchant-panels{padding:12px}.merchant-panel{display:none}.merchant-panel.is-active{display:block}.merchant-reset{display:grid;grid-template-columns:minmax(140px,160px) minmax(0,1fr) minmax(140px,160px);gap:16px;align-items:stretch}.merchant-reset__sidebar{display:flex;flex-direction:column;gap:8px}.merchant-reset__layer{display:flex;align-items:center;gap:10px;padding:10px 12px;border:0;border-radius:12px;background:#ffffff0a;color:#f5f8ff;font-weight:600;cursor:pointer;transition:background .12s ease}.merchant-reset__layer img{width:36px;height:36px;object-fit:contain}.merchant-reset__layer.is-active{background:linear-gradient(180deg,#ffa90066,#ff730040);box-shadow:inset 0 0 0 2px #ffb30059}.merchant-reset__main{background:linear-gradient(180deg,#f1a027f5,#934f1afa);border-radius:18px;padding:20px 22px 22px;display:flex;flex-direction:column;justify-content:flex-start;align-items:stretch;gap:20px;min-height:260px;box-shadow:0 18px 40px #010409d9,inset 0 1px #ffffff1a;border:1px solid hsl(35 84% 55% / .85)}.merchant-reset__layout{display:grid;grid-template-rows:auto 1fr auto;gap:20px;width:100%;height:100%}.merchant-reset__main.is-forge-complete{justify-content:flex-start;padding:14px 18px 16px;min-height:150px;gap:10px}.merchant-reset__content{display:flex;flex-direction:column;justify-content:space-between;align-items:center;gap:16px;text-align:center}.merchant-reset__main.is-forge-complete .merchant-reset__content{justify-content:flex-start;gap:10px}.merchant-reset__main.is-forge-complete .merchant-reset__layout{height:auto;grid-template-rows:auto auto auto;gap:8px}.merchant-reset__actions{display:flex;justify-content:center;width:100%}.merchant-reset__header{display:flex;flex-direction:column;gap:10px;align-items:center;text-align:center}.merchant-reset__icon{width:64px;height:64px;object-fit:contain}.merchant-reset__titles h3{margin:0;font-size:1.5rem;color:#fff;text-shadow:0 2px 4px rgba(0,0,0,.55)}.merchant-reset__titles p{margin:4px 0 0;color:#e6f5ff;font-size:.95rem;line-height:1.4;align-self:center}.merchant-reset__main.is-forge-complete .merchant-reset__titles p{margin-top:16px}.merchant-reset__body{display:flex;flex-direction:column;gap:16px;align-items:center;text-align:center;justify-content:flex-start;width:100%}.merchant-reset__main.is-forge-complete .merchant-reset__body{gap:4px}.merchant-reset__status{color:#f0f8ff;font-size:.96rem;line-height:1.55;min-height:44px;max-width:540px;display:flex;align-items:center;justify-content:center;text-align:center;margin-inline:auto}.merchant-reset__main.is-forge-complete .merchant-reset__status,.merchant-reset__main.is-forge-complete .merchant-reset__status:empty{min-height:0}.merchant-reset__status:empty{visibility:hidden;min-height:44px}.merchant-reset__status strong{font-weight:800}.merchant-reset__action{display:inline-flex;align-items:center;justify-content:center;gap:4px;align-self:center;min-width:min(430px,100%);padding:12px 26px;font-size:1.35rem;font-weight:800;letter-spacing:.04em;border-radius:999px;border:0;background:linear-gradient(180deg,#faac38,#de7112);box-shadow:0 6px #612a05,0 0 0 3px #321501e6;color:#fff;cursor:pointer;position:relative;user-select:none}.merchant-reset__action-plus{font-size:1.1em;margin-right:0;position:relative;top:-1px;left:2px}.merchant-reset__action-icon{width:32px;height:32px;display:inline-flex;align-items:center;justify-content:center;position:relative;top:1.5px}.merchant-reset__action-icon img{width:100%;height:100%;object-fit:contain}.merchant-reset__action-amount{min-width:0}.merchant-reset__req-msg{font-size:1.05rem;font-weight:700;padding:6px 4px;text-align:center;color:#fff;text-shadow:0 .5px 0 #000,0 1px 2px rgba(0,0,0,.45)}.merchant-reset__action-plus,.merchant-reset__action-amount{text-shadow:0 .5px 0 #000,0 -.5px 0 #000,.5px 0 0 #000,-.5px 0 0 #000,.5px .5px 0 #000,-.5px .5px 0 #000,.5px -.5px 0 #000,-.5px -.5px 0 #000,0 1px 0 rgba(0,0,0,.55)}@keyframes forgeFirePulse{0%{box-shadow:0 0 10px 2px #ff92334d,0 6px #612a05,0 0 0 3px #321501e6}50%{box-shadow:0 0 18px 5px #ffa04d8c,0 6px #612a05,0 0 0 3px #3c1901}to{box-shadow:0 0 10px 2px #ff92334d,0 6px #612a05,0 0 0 3px #321501e6}}.merchant-reset__action:not(:disabled):hover,.merchant-reset__action:not(:disabled):focus-visible{background:linear-gradient(180deg,#fab347,#e27312);animation:forgeFirePulse 1.1s infinite ease-in-out}.merchant-reset__action.disabled,.merchant-reset__action:disabled{cursor:not-allowed!important}@media(max-width:900px){.merchant-reset{grid-template-columns:1fr}.merchant-reset__sidebar{flex-direction:row;overflow-x:auto}.merchant-reset__layer{min-width:140px;justify-content:center}}
