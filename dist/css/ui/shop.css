:root{--shop-bg: hsla(215, 32%, 7%, .75);--shop-card: hsl(220 18% 14% / 1);--shop-border: hsl(210 18% 28% / 1);--shop-shadow: 0 20px 60px hsl(0 0% 0% / .45);--shop-radius: 20px;--shop-anim: .22s cubic-bezier(.2, .8, .2, 1);--safe-top: env(safe-area-inset-top, 0px);--safe-bottom: env(safe-area-inset-bottom, 0px)}.shop-overlay{position:fixed;inset:0;z-index:4000;pointer-events:none;user-select:none}.shop-overlay.is-open{pointer-events:auto}.shop-sheet{position:absolute;inset:0;backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);display:grid;grid-template-rows:auto 1fr auto;transform:translateY(100%);transition:transform var(--shop-anim);box-shadow:var(--shop-shadow)}.shop-overlay:not(.is-open) .shop-sheet,.upg-overlay:not(.is-open) .upg-sheet{box-shadow:none}.shop-overlay.is-open .shop-sheet{transform:translateY(0)}.shop-grabber{padding-top:calc(8px + var(--safe-top));padding-bottom:12px;display:grid;place-items:center;touch-action:none;-webkit-user-select:none;user-select:none;background:var(--shop-bg);position:relative;z-index:6}.shop-grabber .grab-handle{width:56px;height:6px;border-radius:999px;background:#ffffff59;box-shadow:inset 0 1px #ffffff40}.shop-actions{display:flex;justify-content:center;align-items:center;gap:12px;padding:12px 16px calc(12px + var(--safe-bottom));flex-wrap:wrap;background:var(--shop-bg)}.shop-actions .shop-close{min-width:180px;height:44px;border-radius:0;border:1px solid hsla(0,80%,40%,.45);background:#b8141426;color:#fff;font-weight:600;letter-spacing:.2px;cursor:pointer;touch-action:manipulation;transition:transform .12s ease,background .12s ease,border-color .12s ease}.shop-actions .shop-close:hover{background:#b8141438}.shop-actions .shop-close:active{transform:translateY(1px);background:#b8141447}.shop-actions .shop-delve{min-width:180px;height:44px;border-radius:0;border:1px solid hsla(150,60%,35%,.45);background:#248f5926;color:#fff;font-weight:600;letter-spacing:.2px;cursor:pointer;touch-action:manipulation;transition:transform .12s ease,background .12s ease,border-color .12s ease}.shop-actions .shop-delve.is-new{box-shadow:0 0 #52e09973;animation:shop-delve-pulse 1.6s ease-in-out infinite}@keyframes shop-delve-pulse{0%,to{box-shadow:0 0 #52e09973}50%{box-shadow:0 0 13px 3px #5ae29ebf}}.shop-actions .shop-delve:hover{background:#248f5938}.shop-actions .shop-delve:active{transform:translateY(1px);background:#248f5947}@media(max-width:480px)and (orientation:portrait){.shop-actions .shop-close,.shop-actions .shop-delve{min-width:140px}}@media(prefers-reduced-motion:reduce){.shop-sheet,.upg-sheet{transition:none}.shop-upgrade.hm-evolve-ready .shop-tile{animation:none}}.shop-sheet{--shop-tile: clamp(84px, 24vw, 128px);--shop-gap: clamp(8px, 2.5vw, 16px);--shop-fade-size: clamp(18px, 5vw, 40px);--shop-scroller-pad: 12px}.shop-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(var(--shop-tile),1fr));gap:clamp(8px,2vw,16px);width:100%;max-width:none;margin-inline:auto;padding:4px;justify-content:center}.shop-upgrade{background:none;border:0;padding:0;cursor:pointer;outline-offset:4px}.shop-upgrade.is-locked{opacity:.78;user-select:none}.shop-upgrade.is-locked-plain,.shop-upgrade[data-locked-plain="1"],.shop-upgrade:disabled{cursor:not-allowed}.shop-upgrade .shop-tile{cursor:inherit}.shop-upgrade.is-locked-plain .shop-tile,.shop-upgrade[data-locked-plain="1"] .shop-tile,.shop-upgrade:disabled .shop-tile{cursor:not-allowed}.shop-upgrade.is-locked .shop-tile .level-badge{background:#000000b8;color:#d9d9d9}.shop-tile{position:relative;width:var(--shop-tile);height:var(--shop-tile);display:block;margin:0 auto}.shop-tile img.base,.shop-tile img.maxed-overlay{position:absolute;inset:0;width:100%;height:100%;object-fit:contain;pointer-events:none}.shop-tile img.base{z-index:1}.shop-tile img.maxed-overlay{z-index:2}.shop-tile img.icon{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:68%;height:68%;object-fit:contain;pointer-events:none;z-index:3}.shop-tile .level-badge{position:absolute;left:50%;bottom:8%;transform:translate(-50%);min-width:22px;height:22px;padding:0 6px;border-radius:999px;display:inline-flex;align-items:center;justify-content:center;font-size:12px;line-height:1;font-weight:700;color:#fff;background:#0000008c;box-shadow:inset 0 0 0 1px #ffffff2e;pointer-events:none;z-index:3}.shop-tile .level-badge.two-line{height:auto;min-height:22px;padding:2px 6px;display:inline-flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;line-height:1.05}@media(hover:none)and (pointer:coarse){.shop-sheet{--grid-pad: clamp(2px, 2.5vw, 8px);--gap: clamp(8px, 3.5vw, 14px);--cols: 3;--shop-scroller-pad: clamp(2px, 2.5vw, 8px);--tile-fit: calc( (100vw - env(safe-area-inset-left) - env(safe-area-inset-right) - (2 * var(--shop-scroller-pad)) - (2 * var(--grid-pad)) - ((var(--cols) - 1) * var(--gap)) ) / var(--cols) );--shop-tile: clamp(72px, var(--tile-fit), 124px)}.shop-grid{padding-inline:var(--grid-pad);gap:var(--gap);box-sizing:border-box}.shop-scroller{overflow-x:clip;padding-inline:var(--shop-scroller-pad)}}.shop-content{position:relative;display:flex;flex-direction:column;padding:0;min-height:0;background:var(--shop-bg)}.shop-header{position:sticky;top:0;z-index:10;background:transparent;backdrop-filter:inherit;-webkit-backdrop-filter:inherit;display:block;width:100%;padding:10px 12px 8px;isolation:isolate}.shop-title{margin:0 0 8px;font-weight:700;text-align:center;position:relative;z-index:2}.shop-line{height:2px;width:100%;background:var(--shop-border);position:relative;z-index:2}.shop-header:after{content:"";position:absolute;left:0;right:0;top:calc(100% - 1px);height:var(--shop-fade-size);background:linear-gradient(180deg,var(--shop-bg),hsla(215,32%,7%,0));opacity:0;pointer-events:none;transition:opacity .16s ease;z-index:1}.shop-scroller{overflow-y:auto;flex:1 1 auto;min-height:0;padding:12px var(--shop-scroller-pad) 16px;scrollbar-gutter:stable both-edges;-webkit-overflow-scrolling:touch}.shop-scroller{scrollbar-width:thin;scrollbar-color:hsl(0 0% 100% / .22) hsl(220 18% 7% / .55)}.shop-scroller::-webkit-scrollbar{width:12px}.shop-scroller::-webkit-scrollbar-track{background:#0f11158c;border-left:1px solid var(--shop-border)}.shop-scroller::-webkit-scrollbar-thumb{background:#ffffff38;border-radius:10px}.shop-scroller::-webkit-scrollbar-thumb:hover{background:#ffffff52}.shop-scroller{scrollbar-width:none}.shop-scroller::-webkit-scrollbar{width:0;height:0;display:none}.shop-sheet.has-scroll-shadow .shop-header:after{opacity:1}.shop-sheet.has-scroll-shadow .shop-scroller{-webkit-mask-image:linear-gradient(180deg,transparent 0%,#000 var(--shop-fade-size),#000 100%);mask-image:linear-gradient(180deg,transparent 0%,#000 var(--shop-fade-size),#000 100%);-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat}.shop-scrollbar{position:absolute;right:6px;width:8px;border-radius:6px;background:transparent;pointer-events:none;z-index:4}.shop-scrollbar__thumb{width:100%;min-height:28px;border-radius:6px;background:#ffffff47;box-shadow:inset 0 0 0 1px #ffffff1f;transform:translateY(0);transition:background .15s ease}.shop-scrollbar__thumb:hover{background:#ffffff5c}.shop-scrollbar{pointer-events:auto}.shop-scrollbar__thumb{cursor:grab}.shop-scrollbar__thumb.dragging{cursor:grabbing}@media(hover:none)and (pointer:coarse){.shop-scrollbar{opacity:0;pointer-events:none;transition:opacity .2s ease}.shop-sheet.is-scrolling .shop-scrollbar,.shop-scrollbar__thumb.dragging{opacity:1;pointer-events:auto}}.upg-overlay{position:fixed;inset:0;z-index:10000;pointer-events:none}.upg-overlay.is-open{pointer-events:auto}.upg-overlay.is-open .upg-sheet{transform:translateY(0)}.upg-sheet{position:absolute;inset:0;display:grid;grid-template-rows:auto 1fr auto;background:#0c1014eb;backdrop-filter:blur(6px);transform:translateY(100%);transition:transform .18s ease;box-shadow:0 -14px 40px #00000073;border-top-left-radius:14px;border-top-right-radius:14px}.upg-overlay img{-webkit-user-select:none;user-select:none;-webkit-user-drag:none}.upg-sheet.is-unlock-upgrade{grid-template-rows:auto auto 1fr auto}.upg-grabber{display:grid;place-items:center;padding:8px 0 4px}.upg-grabber .grab-handle{width:52px;height:5px;border-radius:4px;background:#ffffff59}.upg-header{padding:10px 18px 0;text-align:center;color:#fff}.upg-title{font-size:clamp(44px,6vw,72px);font-weight:700}.upg-level{font-size:clamp(18px,2.6vw,28px);opacity:.92}.upg-content{display:flex;flex-direction:column;align-items:center;justify-content:center;padding-bottom:2vh;will-change:transform}.upg-sheet:not(.is-maxed) .upg-content{transform:translateY(-12vh);padding-top:2vh}.upg-sheet.is-maxed .upg-content{transform:translateY(-20vh);padding-top:.5vh;padding-bottom:3vh}.upg-sheet.is-unlock-short .upg-content{transform:none}.upg-sheet.is-locked-hidden .upg-content{transform:translateY(-24vh);padding-top:2vh;padding-bottom:2vh;justify-content:flex-start}.upg-sheet.is-unlock-upgrade .upg-content{transform:none;padding-top:1.5vh;padding-bottom:2vh}.upg-desc.centered{text-align:center;font-size:clamp(32px,4.6vw,50px);margin-top:4px;white-space:pre-line}.upg-desc.centered.lock-desc{margin-top:0}.upg-info{display:grid;gap:14px;margin:14px 0 4px;text-align:center;color:#fff}.upg-sheet.is-locked-hidden .upg-info{margin-top:50px}.upg-costs{gap:2px;margin-top:2px}.upg-line{font-size:clamp(32px,4.6vw,50px);line-height:1.25}.upg-line.lock-note{font-size:clamp(26px,3.6vw,40px);color:#ffcc6f;font-weight:600}.upg-line .coin-ico{width:.9em;height:.9em;vertical-align:-.14em;margin-right:-.1em}.upg-actions{display:flex!important;justify-content:center;align-items:center;flex-wrap:wrap;gap:.8vw;padding:1vh 0}.upg-actions .shop-close,.upg-actions .shop-delve{flex:0 1 24vw;height:clamp(76px,10vh,126px);font-size:clamp(24px,2.8vw,36px);border-radius:0;color:#fff;font-weight:600;letter-spacing:.2px;cursor:pointer;touch-action:manipulation;-webkit-user-select:none;user-select:none;transition:transform .12s ease,background .12s ease,border-color .12s ease}.upg-actions .shop-close{border:1px solid hsl(0 80% 40% / .45);background:#b8141426}.upg-actions .shop-delve{border:1px solid hsl(150 60% 35% / .45);background:#248f5926}.upg-actions .shop-delve.hm-evolve-btn,.upg-actions .shop-delve.hm-view-milestones{border-color:#f48c25a6;background:#f2800d26;color:#ffe6c7}.upg-actions .shop-delve.hm-evolve-btn:hover,.upg-actions .shop-delve.hm-view-milestones:hover{background:#f2800d38}.upg-actions .shop-delve.hm-evolve-btn:active,.upg-actions .shop-delve.hm-view-milestones:active{transform:translateY(1px);background:#f2800d47}.upg-actions .shop-delve:hover{background:#248f5938}.upg-actions .shop-delve:active{transform:translateY(1px);background:#248f5947}.upg-actions .shop-close:hover{background:#b8141438}.upg-actions .shop-close:active{transform:translateY(1px);background:#b8141447}@media(max-width:520px){.upg-title{font-size:clamp(26px,6vw,40px)}.upg-line{font-size:clamp(18px,4.8vw,24px)}.upg-actions .shop-close,.upg-actions .shop-delve{flex-basis:clamp(140px,44vw,240px);height:clamp(50px,9vh,80px);font-size:clamp(16px,4.2vw,22px)}}.shop-tile .level-badge.can-buy{color:#52e099;text-shadow:0 0 10px hsla(150,60%,45%,.6)}.shop-tile .level-badge.is-maxed{color:#f28cbf;text-shadow:0 0 10px hsla(330,70%,45%,.65)}.shop-tile .shop-upgrade.hm-evolve-ready .level-badge,.shop-upgrade.hm-evolve-ready .level-badge{color:#f7b36e;text-shadow:0 0 10px hsla(30,90%,55%,.65)}.shop-upgrade.hm-evolve-ready .shop-tile{border-radius:50%;box-shadow:0 0 16px #f48c25a6;animation:hm-evolve-glow 1.6s ease-in-out infinite}.upg-sheet.hm-evolve-ready .upg-level{color:#f9bf86;text-shadow:0 0 12px hsla(30,90%,55%,.75)}.upg-desc.centered,.upg-line{color:#fff;mix-blend-mode:normal;-webkit-text-fill-color:hsl(0 0% 100%);-webkit-text-stroke:0 transparent;opacity:1}.upg-content{overflow-y:auto;min-height:0;-webkit-overflow-scrolling:touch;overscroll-behavior:contain}@media(hover:none)and (pointer:coarse){:root{--upg-title-size: clamp(32px, 5vmin, 52px);--upg-desc-size: clamp(22px, 3.4vmin, 30px);--upg-line-size: clamp(22px, 3.4vmin, 30px)}.upg-header .upg-title{font-size:var(--upg-title-size)}.upg-desc.centered{font-size:var(--upg-desc-size)}.upg-line{font-size:var(--upg-line-size)}.upg-actions{padding-bottom:calc(8px + env(safe-area-inset-bottom))}}@media(hover:none)and (pointer:coarse)and (min-width:700px){:root{--upg-title-size: clamp(42px, 7vmin, 70px);--upg-desc-size: clamp(30px, 5vmin, 50px);--upg-line-size: clamp(30px, 5vmin, 50px)}.upg-info{gap:18px}}@media(hover:none)and (pointer:coarse)and (orientation:portrait)and (min-width:700px){.upg-sheet:not(.is-maxed) .upg-content{transform:translateY(-18vh);padding-top:3vh}.upg-sheet.is-maxed .upg-content{transform:translateY(-26vh);padding-top:1vh}.upg-sheet.is-locked-hidden .upg-content{transform:translateY(-30vh);padding-top:.5vh}.upg-sheet.is-unlock-short .upg-content{transform:translateY(10vh)}}@media(hover:none)and (pointer:coarse)and (max-width:600px){:root{--upg-title-size: clamp(28px, 6vmin, 44px);--upg-desc-size: clamp(16px, 2.8vmin, 22px);--upg-line-size: clamp(18px, 3.2vmin, 24px)}}.hm-evolve-note,.upg-desc.centered.hm-evolve-note{display:flex;width:100%;margin-inline:auto;align-items:center;justify-content:center;padding-block:clamp(48px,8vh,116px);color:#faad61!important;-webkit-text-fill-color:hsl(30,94%,68%)!important;font-weight:800;text-align:center;line-height:1.2;text-shadow:0 0 12px hsla(30,90%,55%,.75)}@keyframes hm-evolve-glow{0%,to{box-shadow:0 0 18px 2px #f48c25a6,0 0 36px 6px #f48c2559}50%{box-shadow:0 0 26px 6px #f5993de6,0 0 48px 12px #f5993d8c}}.hm-view-milestones-row{display:flex;justify-content:center;margin:8px 0}.hm-view-milestones{border:1px solid hsl(30 90% 55% / .65);background:#f2800d26;color:#ffe6c7;padding:10px 14px}.hm-milestones-overlay{position:fixed;inset:0;z-index:11000;display:flex;align-items:center;justify-content:center;padding:clamp(12px,3vw,24px);background:#080e168c;backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px)}.hm-milestones-dialog{width:min(520px,90vw);max-height:min(calc(80vh + var(--safe-bottom)),720px);overflow:auto;background:linear-gradient(150deg,#0f1626f5,#121a2af0);border:1px solid hsl(30 90% 55% / .5);box-shadow:0 16px 40px #0000008c;border-radius:14px;padding:clamp(14px,2.4vw,20px);padding-bottom:calc(clamp(14px,2.4vw,20px) + var(--safe-bottom));color:#f7f2e9;font-family:var(--font-ui, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, sans-serif)}.hm-milestones-title{margin:0 0 12px;font-size:clamp(20px,3vw,26px);letter-spacing:.4px;color:#ffdcb3;text-align:center}.hm-milestones-list{list-style:none;padding:0;margin:0 0 14px;display:flex;flex-direction:column;gap:8px}.hm-milestones-list li{padding:10px 12px;border-radius:10px;background:#ffffff0d;border:1px solid rgba(255,255,255,.08);box-shadow:inset 0 1px #ffffff0f;font-size:clamp(15px,2.6vw,18px);line-height:1.35;text-align:center}.hm-milestone-text{position:relative;display:inline-flex;padding:2px 6px;border-radius:6px}.hm-milestones-list li.hm-milestone-achieved{position:relative;opacity:.7}.hm-milestones-list li.hm-milestone-achieved .hm-milestone-text:after{content:"";position:absolute;left:1%;right:1%;top:55%;height:1.5px;background:currentColor;opacity:.85;transform:translateY(-50%);pointer-events:none;border-radius:999px}@media(hover:none)and (pointer:coarse){.hm-milestones-list li.hm-milestone-achieved .hm-milestone-text{text-decoration:line-through}.hm-milestones-list li.hm-milestone-achieved .hm-milestone-text:after{content:none}}.hm-milestones-close{display:inline-flex;align-items:center;justify-content:center;padding:10px 18px;width:100%;font-size:16px;font-weight:700;color:#1b120c;background:linear-gradient(135deg,#ffdfba,#ffbf6f);border:0;border-radius:10px;box-shadow:0 6px 18px #00000059;cursor:pointer;transition:transform .12s ease,box-shadow .12s ease,filter .12s ease}.hm-milestones-close:hover{filter:brightness(1.05)}.hm-milestones-close:active{transform:translateY(1px);box-shadow:0 4px 12px #0000004d}.upg-sheet.is-hm-upgrade{grid-template-rows:auto minmax(0,1fr) auto}.upg-sheet.is-hm-upgrade .upg-content{align-items:stretch;justify-content:flex-start;padding:12px 18px 16px;transform:none;gap:12px;overflow-y:auto;min-height:0}.upg-sheet.is-hm-upgrade.hm-evolve-ready .upg-content{justify-content:flex-start;padding-top:clamp(10px,4vh,60px);padding-bottom:clamp(10px,3vh,32px);gap:clamp(12px,3vh,24px)}.upg-sheet.is-hm-upgrade .upg-info{width:100%;text-align:center;gap:10px}.upg-sheet.is-hm-upgrade .upg-desc.centered{text-align:center;font-size:clamp(32px,4.6vw,50px);line-height:1.2}.upg-sheet.is-hm-upgrade.is-endless-xp .upg-desc.centered{font-size:clamp(26px,3.7vw,40px)}.upg-sheet.is-hm-upgrade .hm-view-milestones-row{width:100%;margin-top:4px}.upg-sheet.is-hm-upgrade .upg-line{font-size:clamp(32px,4.6vmin,50px)}.upg-sheet.is-hm-upgrade.is-endless-xp .upg-line{font-size:clamp(26px,3.7vw,40px)}@media(max-width:640px){.upg-sheet.is-hm-upgrade .upg-desc.centered{font-size:clamp(26px,4vw,42px)}.upg-sheet.is-hm-upgrade.is-endless-xp .upg-desc.centered{font-size:clamp(22px,3.4vw,34px)}.upg-sheet.is-hm-upgrade .upg-line{font-size:clamp(26px,4vmin,42px)}.upg-sheet.is-hm-upgrade.is-endless-xp .upg-line{font-size:clamp(22px,3.4vw,34px)}}.hm-view-milestones:hover{background:#f2800d38}.hm-view-milestones:active{transform:translateY(1px);background:#f2800d47}@media(hover:none)and (pointer:coarse)and (orientation:landscape)and (max-height:520px){.upg-sheet:not(.is-maxed) .upg-content,.upg-sheet.is-maxed .upg-content{transform:none;padding-top:.5vh;padding-bottom:.5vh}.upg-header{padding:6px 12px 0}.upg-desc.centered{margin:.25rem 0 .35rem;line-height:1.1}.upg-info{gap:.25rem;margin:.3rem 0 .2rem}.upg-line{line-height:1.1;margin:.15rem 0}.bonus-line{margin-block:.15rem}.upg-actions{gap:.4rem;padding-top:4px;padding-bottom:calc(6px + env(safe-area-inset-bottom))}.upg-actions .shop-close,.upg-actions .shop-delve{height:clamp(40px,12vh,54px);font-size:clamp(13px,2vmin,17px)}}@media(hover:none)and (pointer:coarse)and (orientation:portrait)and (min-width:700px){.upg-level{font-size:clamp(20px,3vmin,35px)}}@media(hover:none)and (pointer:coarse)and (orientation:landscape)and (min-width:700px){.upg-sheet:not(.is-maxed) .upg-content{transform:translateY(-8vh);padding-top:2vh}.upg-sheet.is-maxed .upg-content{transform:translateY(-14vh);padding-top:1vh}.upg-sheet.is-locked-hidden .upg-content{transform:translateY(-16vh);padding-top:.5vh}.upg-sheet.is-unlock-upgrade .upg-content{transform:none;padding-top:2vh}}.bonus-line .infinity-symbol{display:inline-block;transform:translateY(.03em);text-shadow:0 .08em .18em rgba(0,0,0,.4);-webkit-text-fill-color:currentColor}@media(max-height:850px)and (hover:hover)and (pointer:fine){.upg-sheet:not(.is-maxed) .upg-content,.upg-sheet.is-maxed .upg-content,.upg-sheet.is-locked-hidden .upg-content,.upg-sheet.is-unlock-short .upg-content,.upg-sheet.is-unlock-upgrade .upg-content{transform:none!important;padding-top:1.2rem!important;padding-bottom:1.2rem!important;justify-content:flex-start!important}.upg-actions{padding-top:4px;padding-bottom:calc(10px + env(safe-area-inset-bottom));gap:.6rem}.upg-actions .shop-close,.upg-actions .shop-delve{height:clamp(52px,12vh,86px);font-size:clamp(18px,3vw,26px)}}
